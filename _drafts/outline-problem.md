---
layout: post
title: "Проблема аутлайнов"
categories: internet-maintenance
lang: ru
---

#Проблема аутлайнов

Есть такая банальная проблема дефолтных аутлайнов: кликаешь на ссылку или кнопку, появляется аутлайн. Начинающих разработчиков он бесит, и они его радостно убивают с помощью `* {outline: none !important}`. Прошаренные разработчики знают, что аутлайн убивать нельзя, поскольку он помогает сориентироваться при навигации с клавиатуры и со вспомогательных устройств.

Однако аутлайн от этого при использовании мыши бесить не перестает. И в этом, как мне кажется, вина разработчиков браузеров. Если бы дефолтные аутлайны вокруг ссылок и кнопок появлялись только при навигации с клавиатуры, ребят, отключающих аутлайны, было бы в разы меньше, и доступность сайтов в среднем по интернету была бы значительно выше.

Сейчас браузеры потихоньку стали исправляться, вводить специальное состояние фокуса для мышиных кликов, у которого отключен дефолтный аутлайн. Исправляются, правда, не все, а если захочется кастомный стиль фокуса, который будет работать только с клавиатурой, без костылей и яваскрипта ничего не выйдет.

Ситуация отличается не только между браузерами, но и у различных фокусируемых элементов внутри одного браузера. Три вида фокусируемых "нажимабельных" элементов --- кнопка, ссылка и элемент с `tabindex="0"`:

<figure>
    <iframe class="demo-frame js-demo-frame" width="100%" src="/demos/outline-demo.htm" frameborder="0"></iframe>
</figure>

А теперь по браузерам --- есть ли аутлайн после клика:

<div class="table-holder">
    <table>
        <thead>
            <tr>
                <th>Браузер</th>
                <th>Кнопка</th>
                <th>Ссылка</th>
                <th>Спан</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Chrome 39</td>
                <td class="false">Да</td>
                <td class="true">Нет</td>
                <td class="false">Да</td>
            </tr>
            <tr>
                <td>Firefox 34 Win </td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
            </tr>
            <tr>
                <td>Firefox 34 Mac </td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
                <td class="false">Да</td>
            </tr>
            <tr>
                <td>Safari 8</td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
                <td class="false">Да</td>
            </tr>
            <tr>
                <td>Opera 12</td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
            </tr>
            <tr>
                <td>IE 10, 11</td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
                <td class="true">Нет</td>
            </tr>
            <tr>
                <td>IE 7—9</td>
                <td class="false">Да</td>
                <td class="false">Да</td>
                <td class="false">Да</td>
            </tr>
        </tbody>
    </table>
</div>

Хочется, чтобы все браузеры наконец исправились, а еще хочется разные псевдоклассы для фокуса клавиатурного и мышиного. Пока этого всего нет, я сделал специальный костыль, который следит за `mousedown` и вешает на сфокусированный элемент специальный класс, с помощью которого можно по-разному стилизовать фокус клавиатурный и мышетачевый.
