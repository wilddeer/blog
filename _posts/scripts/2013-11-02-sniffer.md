---
layout: post
title: "Sniffer.js"
categories: scripts
lang: ru
---

#Sniffer.js {#header}

##&rsquo;cause if you can&rsquo;t detect it, you should sniff it! {#subheader}

[Сниффер](https://github.com/wilddeer/Sniffer) вычисляет браузер, движок и операционку/девайс по юзер-агенту.

> --- Но ведь все правильные дяди тестируют поддержку фич!!1!1

Я фигачу фиче-детекты как босс. Но когда они не работают, я возвращаюсь к грязным хакам.

- Нельзя, например, достоверно определить поведение блоков с `overflow: scroll / auto` на мобильных девайсах. И еще много других штук. Юзаем Сниффер!
- Сниффаем ложные результаты фичетестов ([моя табличка ложных срабатываний](https://docs.google.com/spreadsheet/ccc?key=0AjA1cIs8C8MGdFdyQ0lMQnhMbHJEeVZpMW9XejhzU2c&usp=sharing#gid=0)).
- Хотите порадовать тех двух идиотов, что зашли на сайт с Киндла? Я хочу! Подарите им контрастные цвета и отключенные анимации.

##Забрать {#getit}

{:.nopadding}
- <a href="https://raw.github.com/wilddeer/Sniffer/master/sniffer.js" class="iconlink"><i class="icon-cloud-download"> </i><span>sniffer.js</span></a> --- полный девелоперский скрипт
- <a href="https://raw.github.com/wilddeer/Sniffer/master/sniffer.min.js" class="iconlink"><i class="icon-cloud-download"> </i><span>sniffer.min.js</span></a> --- минифицированный скрипт для продакшена

##Запустить {#useit}

Кладем в `<head>` рядом с [Модернайзером](http://modernizr.com) (Модернайзер не обязателен, но вы же его используете, да?).

Теперь у нас в глобал скоупе есть замечательный объект:

{% highlight js cssclass=codewrap %}
{% include sniffer/src/doc/parts/sniffer.object.md %}
{% endhighlight %}

А у тега `HTML` появилось несколько модных классов: один для имени браузера, один для движка, один для оси/девайса и по одному для каждой обнаруженной фичи. Пользуйтесь ими для варьирования стилей:

{% highlight css cssclass=codewrap %}
{% include sniffer/src/doc/parts/sniffer.css.example.md %}
{% endhighlight %}

##Детекты {#detects}

В квадратных скобках имя класса / значение свойства в объекте.

**Браузеры:**

{% include sniffer/doc/browser.ru.md %}

Сафари нет, потому что для него нет достоверного детекта. Нет, правда! Если вам очень нужен тест на Сафари, можно попробовать `Sniffer.browser.name === undefined && Sniffer.browser.engine == 'webkit'`, но этот тест пройдет куча других вебкитов.

**Движки:**

{% include sniffer/doc/engine.ru.md %}

**Ось/Девайс:**

{% include sniffer/doc/os.ru.md %}

**Фичи:**

{% include sniffer/doc/feature.ru.md %}

##Лицензия

[MIT license](http://opensource.org/licenses/MIT).

##Тест {#test}

<div id="test_console"></div>

<script>
	dzDelayed.push(function() {
		testConsole.log('<b>Sniffer.os.name</b><br>'+Sniffer.os.name);
		testConsole.log('<b>Sniffer.os.version</b><br>'+Sniffer.os.version);
		testConsole.log('<b>Sniffer.browser.name</b><br>'+Sniffer.browser.name);
		testConsole.log('<b>Sniffer.browser.engine</b><br>'+Sniffer.browser.engine);
		testConsole.log('<b>Sniffer.browser.version</b><br>'+Sniffer.browser.version);

		for (var prop in Sniffer.features) {
			testConsole.log('<b>Sniffer.features.'+prop+':</b><br>'+Sniffer.features[prop]);
		}
	});
</script>

Развлекайтесь.